<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPU VM Passthrough ê°€ì´ë“œ</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ–¥ï¸</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        mono: ['SF Mono', 'Monaco', 'Cascadia Code', 'monospace']
                    }
                }
            }
        }
    </script>
    <style>
        .layer-card { transition: all 0.3s ease; }
        .layer-card:hover { transform: translateY(-2px); }
        .code-block {
            background: linear-gradient(135deg, #1c1917 0%, #292524 100%);
        }
    </style>
</head>
<body class="bg-white dark:bg-stone-900 text-stone-900 dark:text-stone-100 min-h-screen flex flex-col transition-colors">
    <!-- Header -->
    <header class="bg-stone-100/90 dark:bg-stone-800/90 border-b border-stone-200 dark:border-stone-700 px-4 sm:px-6 lg:px-8 py-4 sticky top-0 z-10 backdrop-blur-sm">
        <div class="max-w-5xl mx-auto">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <a href="gpu-sw-stack.html" class="p-2 rounded-lg hover:bg-stone-200 dark:hover:bg-stone-700 text-stone-600 dark:text-stone-300">
                        â† SW ìŠ¤íƒ
                    </a>
                    <div>
                        <h1 class="text-xl font-bold text-teal-600 dark:text-teal-400">VM Passthrough ê°€ì´ë“œ</h1>
                        <p class="text-xs text-stone-500 dark:text-stone-400">ì™œ VM í™˜ê²½ì´ ë‹¤ë¥¸ê°€?</p>
                    </div>
                </div>
                <button id="theme-toggle" class="p-2 rounded-lg hover:bg-stone-200 dark:hover:bg-stone-700 text-stone-600 dark:text-stone-300">
                    <span class="dark:hidden">â˜€ï¸</span>
                    <span class="hidden dark:inline">ğŸŒ™</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 max-w-5xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Prerequisites Notice -->
        <section class="mb-8">
            <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-700">
                <div class="flex items-start gap-3">
                    <span class="text-xl">ğŸ“š</span>
                    <div>
                        <h3 class="font-semibold text-blue-800 dark:text-blue-300 mb-1">ì´ ê°€ì´ë“œë¥¼ ì½ê¸° ì „ì—</h3>
                        <p class="text-sm text-blue-700 dark:text-blue-400">
                            ì´ ë¬¸ì„œëŠ” <a href="gpu-hw-architecture.html" class="underline hover:no-underline">HW ì•„í‚¤í…ì²˜</a>ì™€ 
                            <a href="gpu-sw-stack.html" class="underline hover:no-underline">SW ìŠ¤íƒ</a> ê°€ì´ë“œë¥¼ ì½ì€ ë…ìë¥¼ ëŒ€ìƒìœ¼ë¡œ í•©ë‹ˆë‹¤.
                            NVSwitch, Fabric Manager, libibumadì˜ ì—­í• ì„ ì´í•´í•˜ê³  ìˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Overview Section -->
        <section class="mb-12">
            <div class="bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-2xl p-6 border border-amber-200 dark:border-amber-800">
                <h2 class="text-2xl font-bold mb-4">ğŸ¯ VMì´ Bare Metalê³¼ ë‹¤ë¥¸ ì´ìœ </h2>
                <p class="text-stone-700 dark:text-stone-300 mb-4">
                    VM í™˜ê²½ì—ì„œëŠ” <strong>NVSwitchê°€ Guestì— ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤</strong>.
                    GPUëŠ” PCIe ì¥ì¹˜ë¼ Passthroughê°€ ê°€ëŠ¥í•˜ì§€ë§Œ, NVSwitchëŠ” ê·¸ë ‡ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-white dark:bg-stone-800 rounded-lg p-4 border border-stone-200 dark:border-stone-700">
                        <div class="text-2xl mb-2">ğŸ”Œ</div>
                        <div class="font-semibold text-green-700 dark:text-green-400">GPU</div>
                        <div class="text-sm text-stone-600 dark:text-stone-400">PCIe ì¥ì¹˜</div>
                        <div class="text-xs mt-1 text-green-600 dark:text-green-500">âœ… Passthrough ê°€ëŠ¥</div>
                    </div>
                    <div class="bg-white dark:bg-stone-800 rounded-lg p-4 border border-stone-200 dark:border-stone-700">
                        <div class="text-2xl mb-2">ğŸ”€</div>
                        <div class="font-semibold text-orange-700 dark:text-orange-400">NVSwitch</div>
                        <div class="text-sm text-stone-600 dark:text-stone-400">PCIe ì•„ë‹˜ (B200)</div>
                        <div class="text-xs mt-1 text-red-600 dark:text-red-500">âŒ Passthrough ë¶ˆê°€</div>
                    </div>
                    <div class="bg-white dark:bg-stone-800 rounded-lg p-4 border border-stone-200 dark:border-stone-700">
                        <div class="text-2xl mb-2">ğŸŒ‰</div>
                        <div class="font-semibold text-purple-700 dark:text-purple-400">CX7 Bridge</div>
                        <div class="text-sm text-stone-600 dark:text-stone-400">/dev/infiniband/*</div>
                        <div class="text-xs mt-1 text-red-600 dark:text-red-500">âŒ Passthrough ë¶ˆê°€</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Why Different Section -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-6">ğŸ” HW ê´€ì : ì™œ NVSwitchë¥¼ ë„˜ê¸¸ ìˆ˜ ì—†ëŠ”ê°€?</h2>
            
            <div class="bg-white dark:bg-stone-800 rounded-2xl border border-stone-200 dark:border-stone-700 overflow-hidden">
                <div class="p-6">
                    <!-- Bare Metal vs VM Comparison -->
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <!-- Bare Metal -->
                        <div class="bg-green-50 dark:bg-green-900/20 rounded-xl p-4 border border-green-200 dark:border-green-700">
                            <h4 class="font-semibold text-green-800 dark:text-green-300 mb-3 flex items-center gap-2">
                                <span>ğŸ–¥ï¸</span> Bare Metal
                            </h4>
                            <div class="bg-white dark:bg-stone-800 rounded-lg p-4 mb-3">
                                <div class="flex items-center justify-center gap-2 flex-wrap text-xs">
                                    <div class="bg-blue-500 text-white px-3 py-2 rounded font-semibold">CPU</div>
                                    <div class="text-stone-400">â†’</div>
                                    <div class="bg-purple-500 text-white px-3 py-2 rounded font-semibold">CX7</div>
                                    <div class="text-stone-400">â†’</div>
                                    <div class="bg-orange-500 text-white px-3 py-2 rounded font-semibold">NVSwitch</div>
                                    <div class="text-stone-400">â†”</div>
                                    <div class="bg-green-500 text-white px-3 py-2 rounded font-semibold">GPU</div>
                                </div>
                            </div>
                            <p class="text-sm text-green-700 dark:text-green-400">
                                OSê°€ ëª¨ë“  ì¥ì¹˜ì— <strong>ì§ì ‘ ì ‘ê·¼</strong> ê°€ëŠ¥
                            </p>
                        </div>
                        
                        <!-- VM -->
                        <div class="bg-amber-50 dark:bg-amber-900/20 rounded-xl p-4 border border-amber-200 dark:border-amber-700">
                            <h4 class="font-semibold text-amber-800 dark:text-amber-300 mb-3 flex items-center gap-2">
                                <span>â˜ï¸</span> VM (GPU Passthrough)
                            </h4>
                            <div class="bg-white dark:bg-stone-800 rounded-lg p-4 mb-3">
                                <div class="text-xs space-y-2">
                                    <!-- Host Layer -->
                                    <div class="border-b border-dashed border-stone-300 dark:border-stone-600 pb-2">
                                        <div class="text-stone-500 dark:text-stone-400 mb-1">Host</div>
                                        <div class="flex items-center justify-center gap-2 flex-wrap">
                                            <div class="bg-blue-500 text-white px-2 py-1 rounded font-semibold">CPU</div>
                                            <div class="text-stone-400">â†’</div>
                                            <div class="bg-purple-500 text-white px-2 py-1 rounded font-semibold">CX7</div>
                                            <div class="text-stone-400">â†’</div>
                                            <div class="bg-orange-500 text-white px-2 py-1 rounded font-semibold">NVSwitch</div>
                                        </div>
                                    </div>
                                    <!-- Guest Layer -->
                                    <div class="pt-1">
                                        <div class="text-stone-500 dark:text-stone-400 mb-1">Guest</div>
                                        <div class="flex items-center justify-center gap-2">
                                            <div class="bg-green-500 text-white px-2 py-1 rounded font-semibold">GPU only</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p class="text-sm text-amber-700 dark:text-amber-400">
                                GuestëŠ” <strong>GPUë§Œ</strong> ë³¼ ìˆ˜ ìˆìŒ
                            </p>
                        </div>
                    </div>

                    <!-- Why CX7 Bridge cannot be passed -->
                    <div class="bg-stone-50 dark:bg-stone-900 rounded-xl p-4 border border-stone-200 dark:border-stone-700">
                        <h4 class="font-semibold mb-3 flex items-center gap-2">
                            <span class="text-purple-500">ğŸŒ‰</span> CX7 Bridgeê°€ Passthrough ë¶ˆê°€ëŠ¥í•œ ì´ìœ 
                        </h4>
                        <p class="text-sm text-stone-600 dark:text-stone-300 mb-3">
                            CX7 BridgeëŠ” PCIe ì¥ì¹˜ì´ì§€ë§Œ, NVSwitch ì œì–´ë¥¼ ìœ„í•´ 
                            <code class="bg-stone-200 dark:bg-stone-700 px-1 rounded">/dev/infiniband/umadX</code> 
                            ë””ë°”ì´ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ ë””ë°”ì´ìŠ¤ëŠ” <strong>InfiniBand MAD (Management Datagram)</strong> í”„ë¡œí† ì½œë¡œ 
                            NVSwitchì™€ í†µì‹ í•˜ëŠ”ë°, VMì— Passthroughí•˜ë©´ Hostì˜ Fabric Managerê°€ NVSwitchë¥¼ ì œì–´í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.
                        </p>
                        <div class="bg-red-50 dark:bg-red-900/20 rounded-lg p-3 border border-red-200 dark:border-red-700">
                            <p class="text-xs text-red-800 dark:text-red-300">
                                <strong>âš ï¸ í•µì‹¬:</strong> NVSwitch ì œì–´ëŠ” <strong>ë°˜ë“œì‹œ Hostì—ì„œ</strong> ì´ë£¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤.
                                CX7 Bridgeë¥¼ Guestì— ë„˜ê¸°ë©´ Host FMì´ NVSwitchë¥¼ ê´€ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Host vs Guest Responsibilities -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-6">ğŸ“‹ Host vs Guest ì—­í•  ë¶„ë‹´</h2>
            
            <div class="bg-white dark:bg-stone-800 rounded-2xl border border-stone-200 dark:border-stone-700 overflow-hidden">
                <div class="p-6">
                    <!-- Diagram -->
                    <div class="bg-stone-50 dark:bg-stone-900 rounded-xl p-6 mb-6">
                        <svg viewBox="0 0 600 300" class="w-full h-auto" style="max-height: 280px;">
                            <!-- Host Area -->
                            <rect x="20" y="20" width="560" height="120" rx="12" fill="none" stroke="#3b82f6" stroke-width="2" stroke-dasharray="6,3"/>
                            <text x="40" y="45" class="fill-blue-600 dark:fill-blue-400 font-bold" style="font-size:14px">Host (ë¬¼ë¦¬ ì„œë²„)</text>
                            
                            <!-- Host Components -->
                            <rect x="40" y="60" width="100" height="60" rx="8" fill="#7c3aed"/>
                            <text x="90" y="85" text-anchor="middle" fill="white" style="font-size:11px">Fabric Manager</text>
                            <text x="90" y="100" text-anchor="middle" fill="white" opacity="0.8" style="font-size:9px">NVSwitch ê´€ë¦¬</text>
                            
                            <rect x="160" y="60" width="80" height="60" rx="8" fill="#7c3aed"/>
                            <text x="200" y="85" text-anchor="middle" fill="white" style="font-size:11px">libibumad</text>
                            <text x="200" y="100" text-anchor="middle" fill="white" opacity="0.8" style="font-size:9px">IB MAD</text>
                            
                            <rect x="260" y="60" width="80" height="60" rx="8" fill="#7c3aed"/>
                            <text x="300" y="85" text-anchor="middle" fill="white" style="font-size:11px">CX7 Bridge</text>
                            <text x="300" y="100" text-anchor="middle" fill="white" opacity="0.8" style="font-size:9px">/dev/infiniband/*</text>
                            
                            <rect x="360" y="60" width="80" height="60" rx="8" fill="#ea580c"/>
                            <text x="400" y="85" text-anchor="middle" fill="white" style="font-size:11px">NVSwitch</text>
                            <text x="400" y="100" text-anchor="middle" fill="white" opacity="0.8" style="font-size:9px">GPU ë¼ìš°íŒ…</text>
                            
                            <rect x="460" y="60" width="100" height="60" rx="8" fill="#64748b"/>
                            <text x="510" y="85" text-anchor="middle" fill="white" style="font-size:11px">vfio-pci</text>
                            <text x="510" y="100" text-anchor="middle" fill="white" opacity="0.8" style="font-size:9px">GPU ì ìœ </text>
                            
                            <!-- Arrows between host components -->
                            <path d="M140 90 L155 90" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow)"/>
                            <path d="M240 90 L255 90" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow)"/>
                            <path d="M340 90 L355 90" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow)"/>
                            
                            <!-- Guest Area -->
                            <rect x="20" y="160" width="560" height="120" rx="12" fill="none" stroke="#22c55e" stroke-width="2" stroke-dasharray="6,3"/>
                            <text x="40" y="185" class="fill-green-600 dark:fill-green-400 font-bold" style="font-size:14px">Guest (VM)</text>
                            
                            <!-- Guest Components -->
                            <rect x="40" y="200" width="120" height="60" rx="8" fill="#059669"/>
                            <text x="100" y="225" text-anchor="middle" fill="white" style="font-size:11px">nvidia-driver</text>
                            <text x="100" y="240" text-anchor="middle" fill="white" opacity="0.8" style="font-size:9px">GPU ì œì–´</text>
                            
                            <rect x="180" y="200" width="100" height="60" rx="8" fill="#059669"/>
                            <text x="230" y="225" text-anchor="middle" fill="white" style="font-size:11px">GPU</text>
                            <text x="230" y="240" text-anchor="middle" fill="white" opacity="0.8" style="font-size:9px">Passthrough</text>
                            
                            <rect x="300" y="200" width="100" height="60" rx="8" fill="#9333ea"/>
                            <text x="350" y="225" text-anchor="middle" fill="white" style="font-size:11px">vLLM</text>
                            <text x="350" y="240" text-anchor="middle" fill="white" opacity="0.8" style="font-size:9px">Application</text>
                            
                            <!-- Passthrough Arrow -->
                            <path d="M510 125 L510 145 L230 145 L230 195" stroke="#10b981" stroke-width="3" fill="none" marker-end="url(#arrow-green)"/>
                            <text x="370" y="155" fill="#10b981" style="font-size:10px">GPU Passthrough</text>
                            
                            <!-- NVLink connection -->
                            <path d="M400 125 L400 145 L180 145 L180 165 L180 195" stroke="#3b82f6" stroke-width="2" stroke-dasharray="4,2" fill="none"/>
                            <text x="280" y="175" fill="#3b82f6" style="font-size:9px">NVLink (ë¬¼ë¦¬ì )</text>
                            
                            <!-- Arrow markers -->
                            <defs>
                                <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#94a3b8"/>
                                </marker>
                                <marker id="arrow-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#10b981"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>

                    <!-- Responsibility Table -->
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm border border-stone-200 dark:border-stone-700 rounded-xl overflow-hidden">
                            <thead class="bg-stone-100 dark:bg-stone-800">
                                <tr>
                                    <th class="px-4 py-3 text-left font-semibold">ì»´í¬ë„ŒíŠ¸</th>
                                    <th class="px-4 py-3 text-center font-semibold">Host</th>
                                    <th class="px-4 py-3 text-center font-semibold">Guest</th>
                                    <th class="px-4 py-3 text-left font-semibold">ì´ìœ </th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-stone-200 dark:divide-stone-700">
                                <tr>
                                    <td class="px-4 py-3 font-medium">nvidia-driver</td>
                                    <td class="px-4 py-3 text-center text-amber-600 dark:text-amber-400">â–³</td>
                                    <td class="px-4 py-3 text-center text-green-600">âœ…</td>
                                    <td class="px-4 py-3 text-xs text-stone-600 dark:text-stone-400">Host: FM ì˜ì¡´ì„±ìœ¼ë¡œ ì„¤ì¹˜ë˜ë‚˜ GPU ëª» ì¡ìŒ (vfio-pci)</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 font-medium">nvidia-fabricmanager</td>
                                    <td class="px-4 py-3 text-center text-green-600">âœ…</td>
                                    <td class="px-4 py-3 text-center text-red-600">âŒ</td>
                                    <td class="px-4 py-3 text-xs text-stone-600 dark:text-stone-400">NVSwitch ì œì–´ëŠ” Hostì—ì„œë§Œ ê°€ëŠ¥</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 font-medium">libibumad</td>
                                    <td class="px-4 py-3 text-center text-green-600">âœ…</td>
                                    <td class="px-4 py-3 text-center text-red-600">âŒ</td>
                                    <td class="px-4 py-3 text-xs text-stone-600 dark:text-stone-400">CX7 Bridge í†µì‹ ìš© (Guestì— ì—†ìŒ)</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 font-medium">nvlink5 (B200)</td>
                                    <td class="px-4 py-3 text-center text-green-600">âœ…</td>
                                    <td class="px-4 py-3 text-center text-red-600">âŒ</td>
                                    <td class="px-4 py-3 text-xs text-stone-600 dark:text-stone-400">NVLink Subnet Manager (Hostì—ì„œ ê´€ë¦¬)</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 font-medium">vfio-pci ì„¤ì •</td>
                                    <td class="px-4 py-3 text-center text-green-600">âœ…</td>
                                    <td class="px-4 py-3 text-center text-stone-400">-</td>
                                    <td class="px-4 py-3 text-xs text-stone-600 dark:text-stone-400">GPUë¥¼ VMì— ë„˜ê¸°ê¸° ìœ„í•´ í•„ìš”</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 font-medium">nokaslr ì»¤ë„ íŒŒë¼ë¯¸í„°</td>
                                    <td class="px-4 py-3 text-center text-stone-400">-</td>
                                    <td class="px-4 py-3 text-center text-green-600">âœ…</td>
                                    <td class="px-4 py-3 text-xs text-stone-600 dark:text-stone-400">B200 CUDA HMM ì´ìŠˆ í•´ê²°</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Why FM doesn't work in Guest -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-6">âŒ Guestì—ì„œ Fabric Managerê°€ ì•ˆ ë˜ëŠ” ì´ìœ </h2>
            
            <div class="bg-white dark:bg-stone-800 rounded-2xl border border-stone-200 dark:border-stone-700 overflow-hidden">
                <div class="bg-red-100 dark:bg-red-900/30 px-6 py-4 border-b border-red-200 dark:border-red-700">
                    <h3 class="text-lg font-bold text-red-800 dark:text-red-300">
                        FMì€ /dev/infiniband/umadX ê°€ í•„ìš”í•©ë‹ˆë‹¤
                    </h3>
                </div>
                <div class="p-6">
                    <p class="text-stone-700 dark:text-stone-300 mb-4">
                        Fabric ManagerëŠ” CX7 Bridgeë¥¼ í†µí•´ NVSwitchì™€ í†µì‹ í•©ë‹ˆë‹¤.
                        ì´ë•Œ <code class="bg-stone-100 dark:bg-stone-700 px-1.5 py-0.5 rounded">/dev/infiniband/umadX</code> ë””ë°”ì´ìŠ¤ê°€ í•„ìš”í•œë°,
                        ì´ ë””ë°”ì´ìŠ¤ëŠ” VMì— Passthroughí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
                    </p>
                    
                    <!-- Error Example -->
                    <div class="bg-stone-900 rounded-xl p-4 mb-4 overflow-x-auto">
                        <div class="text-xs text-stone-400 mb-2"># Guestì—ì„œ FM ì‹œì‘ ì‹œë„</div>
                        <div class="font-mono text-sm text-green-400 mb-3">$ sudo systemctl start nvidia-fabricmanager</div>
                        <div class="text-xs text-stone-400 mb-2"># journalctl -u nvidia-fabricmanager ì—ëŸ¬ ë¡œê·¸</div>
                        <div class="font-mono text-sm text-red-400 space-y-1">
                            <div>Failed to open InfiniBand device</div>
                            <div>request to query NVSwitch device information failed</div>
                            <div>NV_WARN_NOTHING_TO_DO</div>
                        </div>
                    </div>
                    
                    <!-- Why -->
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-stone-50 dark:bg-stone-900 rounded-lg p-4">
                            <h4 class="font-semibold text-stone-700 dark:text-stone-300 mb-2">Hostì—ì„œ í™•ì¸</h4>
                            <div class="bg-stone-800 rounded p-3 font-mono text-xs text-green-400">
                                <div>$ ls /dev/infiniband/</div>
                                <div class="text-stone-300">issm0 issm1 umad0 umad1 ...</div>
                            </div>
                        </div>
                        <div class="bg-stone-50 dark:bg-stone-900 rounded-lg p-4">
                            <h4 class="font-semibold text-stone-700 dark:text-stone-300 mb-2">Guestì—ì„œ í™•ì¸</h4>
                            <div class="bg-stone-800 rounded p-3 font-mono text-xs text-red-400">
                                <div>$ ls /dev/infiniband/</div>
                                <div class="text-stone-500">ls: cannot access '/dev/infiniband/': No such file or directory</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-700">
                        <p class="text-sm text-amber-800 dark:text-amber-300">
                            <strong>ğŸ’¡ ê²°ë¡ :</strong> Guestì—ëŠ” FMì„ ì„¤ì¹˜í•˜ì§€ ë§ˆì„¸ìš”. 
                            Hostì˜ FMì´ NVSwitchë¥¼ ê´€ë¦¬í•˜ê³ , GuestëŠ” GPUë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quick Install Commands -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-6">ğŸ“¦ ì„¤ì¹˜ ëª…ë ¹ì–´</h2>
            
            <div class="grid md:grid-cols-2 gap-6">
                <!-- Host -->
                <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-5 border border-blue-200 dark:border-blue-700">
                    <h4 class="font-semibold text-blue-800 dark:text-blue-300 mb-3 flex items-center gap-2">
                        <span>ğŸ–¥ï¸</span> Host (RHEL/Rocky 9)
                    </h4>
                    <div class="bg-stone-900 rounded-lg p-4 text-xs font-mono text-green-400 overflow-x-auto">
                        <div class="text-stone-500"># 1. vfio-pci ì„¤ì • ë¨¼ì € (Quick Start ì°¸ì¡°)</div>
                        <div class="mt-2 text-stone-500"># 2. íŒ¨í‚¤ì§€ ì„¤ì¹˜</div>
                        <div>sudo ./nvidia-rpmtools install 9 \</div>
                        <div class="pl-4">nvidia-driver-590-open \</div>
                        <div class="pl-4">nvidia-fabricmanager-590 \</div>
                        <div class="pl-4 text-amber-400">libibumad infiniband-diags \</div>
                        <div class="pl-4 text-amber-400">nvlink5-590</div>
                        <div class="mt-2 text-stone-500"># 3. FM ì‹œì‘</div>
                        <div>sudo systemctl enable --now nvidia-fabricmanager</div>
                    </div>
                </div>
                
                <!-- Guest -->
                <div class="bg-green-50 dark:bg-green-900/20 rounded-xl p-5 border border-green-200 dark:border-green-700">
                    <h4 class="font-semibold text-green-800 dark:text-green-300 mb-3 flex items-center gap-2">
                        <span>â˜ï¸</span> Guest (RHEL/Rocky 9)
                    </h4>
                    <div class="bg-stone-900 rounded-lg p-4 text-xs font-mono text-green-400 overflow-x-auto">
                        <div class="text-stone-500"># 1. ë“œë¼ì´ë²„ë§Œ ì„¤ì¹˜</div>
                        <div>sudo ./nvidia-rpmtools install 9 \</div>
                        <div class="pl-4">nvidia-driver-590-open</div>
                        <div class="mt-2 text-stone-500"># 2. nokaslr ì„¤ì •</div>
                        <div class="text-stone-400"># /etc/default/grub:</div>
                        <div class="text-amber-400">GRUB_CMDLINE_LINUX_DEFAULT="nokaslr"</div>
                        <div class="mt-2 text-stone-500"># 3. GRUB ì—…ë°ì´íŠ¸ ë° ì¬ë¶€íŒ…</div>
                        <div>sudo grub2-mkconfig -o /boot/grub2/grub.cfg</div>
                        <div>sudo reboot</div>
                    </div>
                </div>
            </div>
            
            <div class="mt-4 p-4 bg-stone-50 dark:bg-stone-800 rounded-lg border border-stone-200 dark:border-stone-700">
                <p class="text-sm text-stone-600 dark:text-stone-400">
                    <strong>ğŸ“ ì°¸ê³ :</strong> ìœ„ëŠ” ìš”ì•½ì…ë‹ˆë‹¤. 
                    BIOS ì„¤ì •, vfio-pci ì„¤ì •, libvirt XML ë“± ìƒì„¸ ë‚´ìš©ì€ 
                    <a href="https://github.com/cagojeiger/pkgman-core/blob/main/docs/install/B200-vm-install.md" 
                       class="text-teal-600 dark:text-teal-400 hover:underline" target="_blank">
                        ìƒì„¸ VM ì„¤ì¹˜ ê°€ì´ë“œ â†—
                    </a>ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.
                </p>
            </div>
        </section>

        <!-- Summary -->
        <section class="mb-12">
            <div class="bg-gradient-to-r from-stone-100 to-stone-50 dark:from-stone-800 dark:to-stone-900 rounded-2xl p-6 border border-stone-200 dark:border-stone-700">
                <h2 class="text-xl font-bold mb-4">ğŸ“ ìš”ì•½</h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold text-stone-700 dark:text-stone-300 mb-2">VMì´ ë‹¤ë¥¸ ì´ìœ </h4>
                        <ul class="space-y-1 text-sm text-stone-600 dark:text-stone-400">
                            <li>â€¢ NVSwitchëŠ” PCIe ì¥ì¹˜ê°€ ì•„ë‹˜ â†’ Passthrough ë¶ˆê°€</li>
                            <li>â€¢ CX7 BridgeëŠ” Hostì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥</li>
                            <li>â€¢ GPUë§Œ PCIeë¼ì„œ Passthrough ê°€ëŠ¥</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold text-stone-700 dark:text-stone-300 mb-2">ì—­í•  ë¶„ë‹´</h4>
                        <ul class="space-y-1 text-sm text-stone-600 dark:text-stone-400">
                            <li>â€¢ <strong>Host:</strong> FM + libibumad + nvlink5 (NVSwitch ê´€ë¦¬)</li>
                            <li>â€¢ <strong>Guest:</strong> nvidia-driver only (GPU ì—°ì‚°)</li>
                            <li>â€¢ Guestì— FM ì„¤ì¹˜ âŒ (ì‘ë™ ì•ˆ í•¨)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Related Links -->
        <section class="mb-8">
            <h2 class="text-lg font-semibold mb-4">ğŸ“š ê´€ë ¨ ë¬¸ì„œ</h2>
            <div class="grid sm:grid-cols-3 gap-3">
                <a href="gpu-hw-architecture.html" class="block p-4 bg-white dark:bg-stone-800 rounded-xl border border-stone-200 dark:border-stone-700 hover:border-teal-500 dark:hover:border-teal-500 transition-colors">
                    <div class="text-lg mb-1">ğŸ”Œ</div>
                    <div class="font-semibold text-sm">HW ì•„í‚¤í…ì²˜</div>
                    <div class="text-xs text-stone-500">PCIe, NVLink, NVSwitch</div>
                </a>
                <a href="gpu-sw-stack.html" class="block p-4 bg-white dark:bg-stone-800 rounded-xl border border-stone-200 dark:border-stone-700 hover:border-teal-500 dark:hover:border-teal-500 transition-colors">
                    <div class="text-lg mb-1">ğŸ“š</div>
                    <div class="font-semibold text-sm">SW ìŠ¤íƒ</div>
                    <div class="text-xs text-stone-500">Driver, FM, NCCL</div>
                </a>
                <a href="https://github.com/cagojeiger/pkgman-core/blob/main/docs/install/B200-vm-install.md" target="_blank" class="block p-4 bg-white dark:bg-stone-800 rounded-xl border border-stone-200 dark:border-stone-700 hover:border-teal-500 dark:hover:border-teal-500 transition-colors">
                    <div class="text-lg mb-1">ğŸ“‹</div>
                    <div class="font-semibold text-sm">ìƒì„¸ VM ê°€ì´ë“œ</div>
                    <div class="text-xs text-stone-500">BIOS, vfio-pci, libvirt</div>
                </a>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-stone-100 dark:bg-stone-800 border-t border-stone-200 dark:border-stone-700 px-4 sm:px-6 lg:px-8 py-6 mt-auto">
        <div class="max-w-5xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-4">
            <div class="text-sm text-stone-500 dark:text-stone-400">
                pkgman - ì—ì–´ê°­ í™˜ê²½ì„ ìœ„í•œ íŒ¨í‚¤ì§€ ê´€ë¦¬
            </div>
            <div class="flex items-center gap-4">
                <a href="index.html" class="text-sm text-teal-600 dark:text-teal-400 hover:underline">â† ë©”ì¸</a>
                <a href="https://github.com/cagojeiger/pkgman" class="text-sm text-stone-500 hover:text-stone-700 dark:text-stone-400 dark:hover:text-stone-200">GitHub</a>
            </div>
        </div>
    </footer>

    <script>
        // Scroll to top on page load
        window.onload = function() {
            window.scrollTo(0, 0);
        };
        
        // Theme toggle
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;
        
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            html.classList.add('dark');
        }
        
        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark');
            localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
        });
    </script>
</body>
</html>
